<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Golang + Ethereum = ? | just some developer thoughts</title><meta name=keywords content><meta name=description content="One of my recent jobs required me to interact with Ethereum network heavily. This was my first chance to develop actual working product on this network and this short post summarizes my thoughts about this experience. Does Golang play nicely with ETH network? Is it a good fit to develop services for such tasks? Let&rsquo;s see.
Go-Ethereum Fundamental part of Golang Ethereum story is Go-Ethereum package. It&rsquo;s&mldr; okay. In general Go fashion it provides you with wide array of all basic operations you need to do and nothing more."><meta name=author content><link rel=canonical href=https://nxyt.pl/blog/posts/golang_for_ethereum/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nxyt.pl/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nxyt.pl/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nxyt.pl/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://nxyt.pl/blog/apple-touch-icon.png><link rel=mask-icon href=https://nxyt.pl/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-D4BXHY930J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-D4BXHY930J",{anonymize_ip:!1})}</script><meta property="og:title" content="Golang + Ethereum = ?"><meta property="og:description" content="One of my recent jobs required me to interact with Ethereum network heavily. This was my first chance to develop actual working product on this network and this short post summarizes my thoughts about this experience. Does Golang play nicely with ETH network? Is it a good fit to develop services for such tasks? Let&rsquo;s see.
Go-Ethereum Fundamental part of Golang Ethereum story is Go-Ethereum package. It&rsquo;s&mldr; okay. In general Go fashion it provides you with wide array of all basic operations you need to do and nothing more."><meta property="og:type" content="article"><meta property="og:url" content="https://nxyt.pl/blog/posts/golang_for_ethereum/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-06T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-06T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang + Ethereum = ?"><meta name=twitter:description content="One of my recent jobs required me to interact with Ethereum network heavily. This was my first chance to develop actual working product on this network and this short post summarizes my thoughts about this experience. Does Golang play nicely with ETH network? Is it a good fit to develop services for such tasks? Let&rsquo;s see.
Go-Ethereum Fundamental part of Golang Ethereum story is Go-Ethereum package. It&rsquo;s&mldr; okay. In general Go fashion it provides you with wide array of all basic operations you need to do and nothing more."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nxyt.pl/blog/posts/"},{"@type":"ListItem","position":3,"name":"Golang + Ethereum = ?","item":"https://nxyt.pl/blog/posts/golang_for_ethereum/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Golang + Ethereum = ?","name":"Golang \u002b Ethereum = ?","description":"One of my recent jobs required me to interact with Ethereum network heavily. This was my first chance to develop actual working product on this network and this short post summarizes my thoughts about this experience. Does Golang play nicely with ETH network? Is it a good fit to develop services for such tasks? Let\u0026rsquo;s see.\nGo-Ethereum Fundamental part of Golang Ethereum story is Go-Ethereum package. It\u0026rsquo;s\u0026hellip; okay. In general Go fashion it provides you with wide array of all basic operations you need to do and nothing more.","keywords":[],"articleBody":"One of my recent jobs required me to interact with Ethereum network heavily. This was my first chance to develop actual working product on this network and this short post summarizes my thoughts about this experience. Does Golang play nicely with ETH network? Is it a good fit to develop services for such tasks? Let’s see.\nGo-Ethereum Fundamental part of Golang Ethereum story is Go-Ethereum package. It’s… okay. In general Go fashion it provides you with wide array of all basic operations you need to do and nothing more. I don’t really dislike that, and I’m okay building necessary abstractions myself. All basic functionality like calling contracts, sending transactions, accessing results of sent transactions is there, which are all the building blocks you’ll need to build higher level of your client. Go-Ethereum also has pretty nice way to package payloads you’ll be sending to smart contracts using abi.ABI objects. I didn’t like it at first, but once I got accustomed to the Go-Ethereum way of doing things I don’t mind it anymore. I wonder if there are any ready to use clients built on top of Go-Ethereum that support common operations like waiting for Tx to get mined and getting all data associated with them (like logs) all at once. It’s not hard to build one yourself, but I imagine I’ll need something like that for every app using Ethereum, so having small convenience methods like that out of the box would be super nice.\nConcurrency Golang concurrency is great, we all know that, but it’s even greater in working with ETH network. I really like that all operations in Go are sync. It makes tracking flow of the functions very easy. The other great thing about it is how easy it is to optimize code bottle necking your application. Very often I’ll start writing some function iterating over list of IDs using for _, _ := range x when prototyping and fix pain points later once I know that my solution is correct. Changing sequential code into concurrent one is just too easy with Go, and it’s probably one of the best reasons to use it for cryptocurrency projects - after all every single operation performed against the network introduces I/O latency, that Go concurrency can easily fix.\nMath Probably the worst part of using Golang for Ethereum network was Golang big.Math packages. I really dislike their APIs and modeling any math problems with it is very unintuitive and unreadable. Depending on how you intend to use Ethereum network maybe you won’t interact with big math too much (sometimes you just need to wrap some identifier in big.Int which is fine), but if your task involves any more complex math chances are you won’t like the experience. Let me give you example of what I’m talking about. Let’s say you have two integers, that you need to add and raise to the pow of 2. Readable solution should look as similar to (x+y)^2 as possible. We don’t necessarily need operator overloading here (doesn’t exist in Golang) and I don’t mind functions like x.Add(y). So how would that problem look in Go?\nres := new(big.Int).Exp(new(big.Int).Add(big.NewInt(10), big.NewInt(20)), big.NewInt(2), nil) Not exactly what I’d call readable. I think the main issue with big.Math is that methods don’t act on pointers, which is why we need new(big.Int) with every operation. The alternative that would be much nicer in my opinion would be something like\nres := big.NewInt(10).Add(big.NewInt(20)).Exp(2, nil) This would read left to right in the order that the operations are executed. I’m sure there are good reasons why big math packages are doing the things their doing, but to be honest - it doesn’t make for a nice user experience.\n","wordCount":"618","inLanguage":"en","datePublished":"2024-01-06T00:00:00Z","dateModified":"2024-01-06T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://nxyt.pl/blog/posts/golang_for_ethereum/"},"publisher":{"@type":"Organization","name":"just some developer thoughts","logo":{"@type":"ImageObject","url":"https://nxyt.pl/blog/favicon.ico"}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-D4BXHY930J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-D4BXHY930J",{anonymize_ip:!1})}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nxyt.pl/blog accesskey=h title="just some developer thoughts (Alt + H)">just some developer thoughts</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Golang + Ethereum = ?</h1><div class=post-meta><span title='2024-01-06 00:00:00 +0000 UTC'>January 6, 2024</span></div></header><div class=post-content><p>One of my recent jobs required me to interact with Ethereum network heavily. This was my first chance to develop actual working product on this network and this short post summarizes my thoughts about this experience. Does Golang play nicely with ETH network? Is it a good fit to develop services for such tasks? Let&rsquo;s see.</p><h1 id=go-ethereum>Go-Ethereum<a hidden class=anchor aria-hidden=true href=#go-ethereum>#</a></h1><p>Fundamental part of Golang Ethereum story is Go-Ethereum package. It&rsquo;s&mldr; okay. In general Go fashion it provides you with wide array of all basic operations you need to do and nothing more. I don&rsquo;t really dislike that, and I&rsquo;m okay building necessary abstractions myself. All basic functionality like calling contracts, sending transactions, accessing results of sent transactions is there, which are all the building blocks you&rsquo;ll need to build higher level of your client. Go-Ethereum also has pretty nice way to package payloads you&rsquo;ll be sending to smart contracts using abi.ABI objects. I didn&rsquo;t like it at first, but once I got accustomed to the Go-Ethereum way of doing things I don&rsquo;t mind it anymore. I wonder if there are any ready to use clients built on top of Go-Ethereum that support common operations like waiting for Tx to get mined and getting all data associated with them (like logs) all at once. It&rsquo;s not hard to build one yourself, but I imagine I&rsquo;ll need something like that for every app using Ethereum, so having small convenience methods like that out of the box would be super nice.</p><h1 id=concurrency>Concurrency<a hidden class=anchor aria-hidden=true href=#concurrency>#</a></h1><p>Golang concurrency is great, we all know that, but it&rsquo;s even greater in working with ETH network. I really like that all operations in Go are sync. It makes tracking flow of the functions very easy. The other great thing about it is how easy it is to optimize code bottle necking your application. Very often I&rsquo;ll start writing some function iterating over list of IDs using <code>for _, _ := range x</code> when prototyping and fix pain points later once I know that my solution is correct. Changing sequential code into concurrent one is just too easy with Go, and it&rsquo;s probably one of the best reasons to use it for cryptocurrency projects - after all every single operation performed against the network introduces I/O latency, that Go concurrency can easily fix.</p><h1 id=math>Math<a hidden class=anchor aria-hidden=true href=#math>#</a></h1><p>Probably the worst part of using Golang for Ethereum network was Golang big.Math packages. I really dislike their APIs and modeling any math problems with it is very unintuitive and unreadable. Depending on how you intend to use Ethereum network maybe you won&rsquo;t interact with big math too much (sometimes you just need to wrap some identifier in big.Int which is fine), but if your task involves any more complex math chances are you won&rsquo;t like the experience. Let me give you example of what I&rsquo;m talking about. Let&rsquo;s say you have two integers, that you need to add and raise to the pow of 2. Readable solution should look as similar to <code>(x+y)^2</code> as possible. We don&rsquo;t necessarily need operator overloading here (doesn&rsquo;t exist in Golang) and I don&rsquo;t mind functions like <code>x.Add(y)</code>. So how would that problem look in Go?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>res</span> <span style=color:#f92672>:=</span> new(<span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>Int</span>).<span style=color:#a6e22e>Exp</span>(new(<span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>Int</span>).<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>NewInt</span>(<span style=color:#ae81ff>10</span>), <span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>NewInt</span>(<span style=color:#ae81ff>20</span>)), <span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>NewInt</span>(<span style=color:#ae81ff>2</span>), <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><p>Not exactly what I&rsquo;d call readable. I think the main issue with big.Math is that methods don&rsquo;t act on pointers, which is why we need <code>new(big.Int)</code> with every operation. The alternative that would be much nicer in my opinion would be something like</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>res</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>NewInt</span>(<span style=color:#ae81ff>10</span>).<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>big</span>.<span style=color:#a6e22e>NewInt</span>(<span style=color:#ae81ff>20</span>)).<span style=color:#a6e22e>Exp</span>(<span style=color:#ae81ff>2</span>, <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><p>This would read left to right in the order that the operations are executed. I&rsquo;m sure there are good reasons why big math packages are doing the things their doing, but to be honest - it doesn&rsquo;t make for a nice user experience.</p></div><footer class=post-footer><ul class=post-tags></ul></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//nxyt.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://nxyt.pl/blog>just some developer thoughts</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>